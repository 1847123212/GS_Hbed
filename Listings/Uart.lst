C51 COMPILER V9.60.0.0   UART                                                              06/15/2021 02:48:45 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE UART
OBJECT MODULE PLACED IN .\Objects\Uart.obj
COMPILER INVOKED BY: D:\Development\Keil_v5\C51\BIN\C51.EXE Application\UART\Uart.c OMF2 OPTIMIZE(8,SPEED) BROWSE INCDIR
                    -(.\Application\Button;.\Application\DS18B20;.\Application\LCD1602;.\Application\SYS;.\Application\UART;.\Application) DE
                    -BUG PRINT(.\Listings\Uart.lst) TABS(2) OBJECT(.\Objects\Uart.obj)

line level    source

   1          #include <reg52.h>
   2          #include "Sys.h"
   3          #include "Uart.h"
   4          #include "stdio.h"//使用printf需要
   5          
   6          /***************************************************
   7          *               串口初始化子函数
   8          *       T1工作在方式2，波特率9600，开串口中断
   9          ****************************************************/
  10          void Uart_Init(void)
  11          {
  12   1        TMOD |= 0x20;        // 定时器1工作在方式2
  13   1        SCON |= 0x50;        // 8位uart，允许串行接受
  14   1        TH1 = 0xFD;         //设置定时器初值
  15   1        TL1 = 0xFD;         //设置定时器初值
  16   1        TR1 = 1;            //启动定时器1
  17   1        TI=1;           //发送中断标记位必须设置
  18   1        EA=1;           //允许总中断  
  19   1      }
  20          
  21          ///***************************************************
  22          //*               UART发送一个字节
  23          //****************************************************/
  24          //void UART_Send_Byte(uint8 dat)
  25          //{
  26          //  SBUF = dat;         //送入缓冲寄存器
  27          //  while (TI == 0);    //等待发送完成
  28          //  TI = 0;
  29          //}
  30          ///***************************************************
  31          //*               UART发送一串字符
  32          //****************************************************/
  33          //void UART_Send_STR(uint8 *str)
  34          //{
  35          //  while(*str != '\0')
  36          //  {
  37          //    SBUF = *str;          //送入缓冲寄存器
  38          //    while (TI == 0);    //等待发送完成
  39          //    TI = 0;
  40          //    str++;                //地址加一
  41          //  }
  42          //}
  43          
  44          /***************************************************
  45          *               中断服务子函数
  46          *          清除RI，同时判断接到的数据
  47          ****************************************************/
  48          //void uart(void) interrupt 4
  49          //{
  50          //  unsigned char Uart_Buf; //接收数据寄存器
  51          //  if(RI)                  //是否收到数据
  52          //   {
  53          //    RI=0;                 //清中断请求
C51 COMPILER V9.60.0.0   UART                                                              06/15/2021 02:48:45 PAGE 2   

  54          //    Uart_Buf = SBUF;
  55          ////    if(Uart_Buf == 0xaa)  //判断
  56          ////      LED = 0;
  57          ////    else if(Uart_Buf == 0x00)
  58          ////      LED = 1;
  59          //   }
  60          //}


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     19    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
